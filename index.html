<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Result Card Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #e6ecf0;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 850px;
      margin: auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 30px;
    }
    .header {
      text-align: center;
      padding: 20px;
      border-bottom: 2px solid #007BFF;
      margin-bottom: 30px;
    }
    .school-name {
      font-size: 24px;
      font-weight: bold;
      color: #007BFF;
    }
    .student-info {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
    }
    .student-info div {
      margin-bottom: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th {
      background: #007BFF;
      color: white;
      padding: 10px;
      text-align: center;
    }
    td {
      padding: 10px;
      text-align: center;
    }
    .grade {
      font-weight: bold;
      color: white;
      border-radius: 12px;
      display: inline-block;
      padding: 4px 10px;
    }
    .A { background: #28a745; }
    .B { background: #ffc107; }
    .C { background: #fd7e14; }
    .F { background: #dc3545; }
    #downloadBtn {
      margin-top: 20px;
      padding: 12px 30px;
      background: #007BFF;
      border: none;
      color: white;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    #downloadBtn:hover {
      background: #0056b3;
    }
    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }
    button[type="submit"] {
      padding: 12px 25px;
      background-color: #007BFF;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      margin-top: 20px;
    }
    button[type="submit"]:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

<div class="container" id="formContainer">
  <div class="header">
    <div class="school-name">GGMPS BASTI HALA - Result Card Generator</div>
  </div>

  <form id="studentForm">
    <input type="text" id="name" placeholder="Student Name" required />
    <input type="number" id="rollNo" placeholder="Roll Number" required />
    <input type="text" id="class" placeholder="Class" required />

    <h4>Enter Marks</h4>
    <input type="number" id="mathMarks" placeholder="Math Marks" required />
    <input type="number" id="mathMaxMarks" placeholder="Math Max Marks" required />

    <input type="number" id="englishMarks" placeholder="English Marks" required />
    <input type="number" id="englishMaxMarks" placeholder="English Max Marks" required />

    <input type="number" id="scienceMarks" placeholder="Science Marks" required />
    <input type="number" id="scienceMaxMarks" placeholder="Science Max Marks" required />

    <input type="number" id="urduMarks" placeholder="Urdu Marks" required />
    <input type="number" id="urduMaxMarks" placeholder="Urdu Max Marks" required />

    <input type="number" id="islamicMarks" placeholder="Islamic Studies Marks" required />
    <input type="number" id="islamicMaxMarks" placeholder="Islamic Studies Max Marks" required />

    <button type="submit">Generate Result Card</button>
  </form>
</div>

<div class="container" id="resultCard" style="display:none;">
  <div class="header">
    <div class="school-name">GGMPS BASTI HALA - Result Card</div>
  </div>

  <div class="student-info">
    <div style="display: flex; justify-content: space-between;">
      <div><strong>Name:</strong> <span id="rName"></span></div>
      <div><strong>Roll No:</strong> <span id="rRoll"></span></div>
    </div>
    <div>
      <strong>Class:</strong> <span id="rClass"></span>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Subject</th>
        <th>Marks Obtained</th>
        <th>Total Marks</th>
        <th>Grade</th>
      </tr>
    </thead>
    <tbody id="marksTable"></tbody>
  </table>

  <div style="margin-top: 30px; text-align: center; font-size: 14px; color: #555;">
    Electronically generated result card verified by <strong>GGMPS BASTI HALA</strong>
  </div>

  <div style="display: flex; justify-content: space-between; margin-top: 50px; font-size: 14px; color: #333;">
    <div style="text-align: center;">
      ______________________<br>
      Teacher Signature
    </div>
    <div style="text-align: center;">
      ______________________<br>
      Principal Signature
    </div>
  </div>

  <button id="downloadBtn">Download as PDF</button>
</div>

<script>
  const form = document.getElementById('studentForm');
  const formContainer = document.getElementById('formContainer');
  const resultCard = document.getElementById('resultCard');
  const downloadBtn = document.getElementById('downloadBtn');

  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const student = {
      name: document.getElementById('name').value,
      rollNo: document.getElementById('rollNo').value,
      class: document.getElementById('class').value,
      marks: [
        { subject: 'Math', obtained: +document.getElementById('mathMarks').value, max: +document.getElementById('mathMaxMarks').value },
        { subject: 'English', obtained: +document.getElementById('englishMarks').value, max: +document.getElementById('englishMaxMarks').value },
        { subject: 'Science', obtained: +document.getElementById('scienceMarks').value, max: +document.getElementById('scienceMaxMarks').value },
        { subject: 'Urdu', obtained: +document.getElementById('urduMarks').value, max: +document.getElementById('urduMaxMarks').value },
        { subject: 'Islamic Studies', obtained: +document.getElementById('islamicMarks').value, max: +document.getElementById('islamicMaxMarks').value }
      ]
    };

    document.getElementById('rName').innerText = student.name;
    document.getElementById('rRoll').innerText = student.rollNo;
    document.getElementById('rClass').innerText = student.class;

    let totalObtained = 0;
    let totalMax = 0;
    let tableRows = '';

    student.marks.forEach(mark => {
      const grade = gradeCalc(mark.obtained, mark.max);
      tableRows += `
        <tr>
          <td>${mark.subject}</td>
          <td>${mark.obtained}</td>
          <td>${mark.max}</td>
          <td><span class="grade ${grade}">${grade}</span></td>
        </tr>
      `;
      totalObtained += mark.obtained;
      totalMax += mark.max;
    });

    const percentage = ((totalObtained / totalMax) * 100).toFixed(2);
    let finalGrade = gradeCalc(totalObtained, totalMax);

    tableRows += `
      <tr>
        <td><strong>Grand Total</strong></td>
        <td><strong>${totalObtained}</strong></td>
        <td><strong>${totalMax}</strong></td>
        <td></td>
      </tr>
      <tr>
        <td><strong>Percentage</strong></td>
        <td colspan="2"><strong>${percentage}%</strong></td>
        <td></td>
      </tr>
      <tr>
        <td><strong>Final Grade</strong></td>
        <td colspan="2"></td>
        <td><span class="grade ${finalGrade}">${finalGrade}</span></td>
      </tr>
    `;

    document.getElementById('marksTable').innerHTML = tableRows;

    formContainer.style.display = 'none';
    resultCard.style.display = 'block';
  });

  downloadBtn.addEventListener('click', function () {
    const element = document.getElementById('resultCard');
    html2pdf().from(element).set({
      margin: 0,
      filename: 'result-card.pdf',
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).save();
  });

  function gradeCalc(obtained, max) {
    const percent = (obtained / max) * 100;
    if (percent >= 80) return 'A';
    if (percent >= 60) return 'B';
    if (percent >= 40) return 'C';
    return 'F';
  }
</script>

</body>
</html>

